{% extends 'base.html' %}
{% load static %}

{% block title %}Main â€¢ {{ aplikasi }}{% endblock title %}

{% block content %}
{% include 'navbar.html' %}

<section class="section mt-4">
  <div class="mx-auto max-w-7xl px-4">
    <div class="relative overflow-hidden rounded-lg border border-white/10">
      <img src="{% static 'images/imgweb.png' %}" 
           alt="Product showcase banner"
           class="h-[240px] md:h-[360px] w-full object-cover brightness-50" />
      <div class="absolute inset-0 bg-gradient-to-t from-[#0B0D0FCC] to-transparent"></div>
      <div class="absolute inset-0 flex items-start px-6 md:px-10 py-8">
        <div class="rounded-lg p-6 max-w-xl ml-0 mr-auto">
          <h1 class="font-heading text-3xl md:text-4xl font-extrabold text-white typing welcome" 
              data-text="{% if user.is_authenticated %}Halo {{ user.username }}, Welcome to Coach Gear{% else %}Welcome to Coach Gear{% endif %}"></h1>
          <p class="mt-6 text-gray-200 text-sm md:text-base text-justify typing description" 
             data-text="Coach Gear adalah platform e-commerce untuk jual beli barang olahraga dan perlengkapan lifestyle branded, dengan harga terjangkau dan kualitas terjamin. Temukan produk favoritmu mulai dari sepatu, jersey, hingga perlengkapan olahraga lainnya. Semua barang dipilih dengan teliti agar tetap berkualitas, meskipun pre-loved."></p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="py-6">
  <div class="mx-auto max-w-3xl px-4">
    <input 
      type="text" 
      id="searchInput" 
      placeholder="Cari produk..." 
      class="bg-black text-white w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-600"
    >
  </div>
</section>

<section class="section pt-6">
  <div class="mx-auto max-w-7xl px-4">
    {% if not products %}
      <div class="text-center py-12">
        <p class="text-gray-500 text-lg">Belum ada produk yang ditambahkan.</p>
        <p>test</p>
      </div>
    {% else %}
      <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {% for product in products %}
          <div class="product-card bg-black rounded-xl overflow-hidden transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl cursor-pointer">
            <a href="{% url 'main:product_details' product.id %}">
              <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="h-48 w-full object-cover">
              <div class="p-4 flex flex-col">
                <h2 class="product-name text-lg font-bold text-white">{{ product.name }}</h2>
                <p class="mt-2 font-semibold text-white">Rp {{ product.price }}</p>
                <p class="text-gray-500 text-sm mt-1">Stock: {{ product.stock }}</p>
                <p class="text-gray-300 text-sm mt-2 truncate">{{ product.description|truncatewords:20 }}...</p>
                <button class="mt-4 bg-yellow-600 text-black px-4 py-2 rounded-lg font-semibold w-full transition-transform duration-300 hover:scale-105 hover:bg-blue-700">
                  Detail
                </button>
              </div>
            </a>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</section>

<script>
  const searchInput = document.getElementById("searchInput");
  const productCards = document.querySelectorAll(".product-card");

  searchInput.addEventListener("input", function () {
    const query = this.value.toLowerCase();
    productCards.forEach(card => {
      const name = card.querySelector(".product-name").textContent.toLowerCase();
      if (name.includes(query)) {
        card.style.display = "block";
      } else {
        card.style.display = "none";
      }
    });
  });
</script>

{% endblock content %}
